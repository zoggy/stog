<ocamldoc with-contents="true"><title>Stog library reference documentation : Stog_engine</title><contents><div class="ocamldoc-page">
<code class="code"><span class="keyword">sig</span><br/>
&#160;&#160;<span class="keyword">module</span>&#160;<span class="constructor">XR</span>&#160;=&#160;<span class="constructor">Xtmpl_rewrite</span><br/>
&#160;&#160;<span class="keyword">exception</span>&#160;<span class="constructor">Cant_open_cache_file</span>&#160;<span class="keyword">of</span>&#160;string<br/>
&#160;&#160;<span class="keyword">type</span>&#160;<span class="keywordsign">'</span>a&#160;level_fun&#160;=<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Fun_stog</span>&#160;<span class="keyword">of</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(<span class="constructor">Stog_types</span>.stog&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Doc_set</span>.t&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog)<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">|</span>&#160;<span class="constructor">Fun_data</span>&#160;<span class="keyword">of</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Doc_set</span>.t&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a)<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">|</span>&#160;<span class="constructor">Fun_stog_data</span>&#160;<span class="keyword">of</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;((<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a)&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Doc_set</span>.t&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a)<br/>
&#160;&#160;<span class="keyword">type</span>&#160;<span class="keywordsign">'</span>a&#160;modul&#160;=&#160;{<br/>
&#160;&#160;&#160;&#160;mod_data&#160;:&#160;<span class="keywordsign">'</span>a;<br/>
&#160;&#160;&#160;&#160;mod_levels&#160;:&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">Stog_engine</span>.level_fun&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Int_map</span>.t;<br/>
&#160;&#160;&#160;&#160;mod_name&#160;:&#160;string;<br/>
&#160;&#160;}<br/>
&#160;&#160;<span class="keyword">module</span>&#160;<span class="keyword">type</span>&#160;<span class="constructor">Module</span>&#160;=<br/>
&#160;&#160;&#160;&#160;<span class="keyword">sig</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="keyword">type</span>&#160;data<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="keyword">val</span>&#160;modul&#160;:&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.data&#160;<span class="constructor">Stog_engine</span>.modul<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="keyword">type</span>&#160;cache_data<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="keyword">val</span>&#160;cache_load&#160;:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.data&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.doc&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.cache_data&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.data<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="keyword">val</span>&#160;cache_store&#160;:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.data&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.doc&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>.cache_data<br/>
&#160;&#160;&#160;&#160;<span class="keyword">end</span><br/>
&#160;&#160;<span class="keyword">type</span>&#160;stog_state&#160;=&#160;{<br/>
&#160;&#160;&#160;&#160;st_stog&#160;:&#160;<span class="constructor">Stog_types</span>.stog;<br/>
&#160;&#160;&#160;&#160;st_modules&#160;:&#160;(<span class="keyword">module</span>&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>)&#160;list;<br/>
&#160;&#160;&#160;&#160;st_docs&#160;:&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Doc_set</span>.t;<br/>
&#160;&#160;}<br/>
&#160;&#160;<span class="keyword">val</span>&#160;run&#160;:<br/>
&#160;&#160;&#160;&#160;?use_cache:bool&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;?default_style:<span class="constructor">XR</span>.tree&#160;list&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_engine</span>.stog_state&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_engine</span>.stog_state<br/>
&#160;&#160;<span class="keyword">val</span>&#160;generate&#160;:<br/>
&#160;&#160;&#160;&#160;?use_cache:bool&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;?gen_cache:bool&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;?default_style:<span class="constructor">XR</span>.tree&#160;list&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;?only_docs:string&#160;list&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;(<span class="keyword">module</span>&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>)&#160;list&#160;<span class="keywordsign">-&gt;</span>&#160;unit<br/>
&#160;&#160;<span class="keyword">val</span>&#160;doc_dst_file&#160;:&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc&#160;<span class="keywordsign">-&gt;</span>&#160;string<br/>
&#160;&#160;<span class="keyword">val</span>&#160;doc_url&#160;:&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_url</span>.t<br/>
&#160;&#160;<span class="keyword">val</span>&#160;env_of_defs&#160;:&#160;?env:<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.def&#160;list&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env<br/>
&#160;&#160;<span class="keyword">val</span>&#160;env_of_used_mods&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;?env:<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Str_set</span>.t&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env<br/>
&#160;&#160;<span class="keyword">type</span>&#160;<span class="keywordsign">'</span>a&#160;stog_doc_rules&#160;=<br/>
&#160;&#160;&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc_id&#160;<span class="keywordsign">-&gt;</span>&#160;(<span class="constructor">XR</span>.name&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.callback)&#160;list<br/>
&#160;&#160;<span class="keyword">val</span>&#160;get_in_env&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Xml</span>.name&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="constructor">XR</span>.tree&#160;list<br/>
&#160;&#160;<span class="keyword">val</span>&#160;opt_in_env&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Xml</span>.name&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="constructor">XR</span>.tree&#160;list&#160;option<br/>
&#160;&#160;<span class="keyword">val</span>&#160;get_in_args_or_env&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">XR</span>.attributes&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.<span class="constructor">Xml</span>.name&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="constructor">XR</span>.tree&#160;list<br/>
&#160;&#160;<span class="keyword">val</span>&#160;get_path&#160;:&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="constructor">Stog_path</span>.path<br/>
&#160;&#160;<span class="keyword">val</span>&#160;get_path_in_args_or_env&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">XR</span>.attributes&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="constructor">Stog_path</span>.path<br/>
&#160;&#160;<span class="keyword">val</span>&#160;doc_env&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env<br/>
&#160;&#160;<span class="keyword">val</span>&#160;apply_stog_env_doc&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc_id&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog<br/>
&#160;&#160;<span class="keyword">val</span>&#160;apply_stog_data_env_doc&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;(<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a)&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.doc_id&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a<br/>
&#160;&#160;<span class="keyword">val</span>&#160;apply_data_env_doc&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.doc_id&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a<br/>
&#160;&#160;<span class="keyword">val</span>&#160;fun_apply_stog_doc_rules&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="constructor">Stog_engine</span>.stog_doc_rules&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">Stog_engine</span>.level_fun<br/>
&#160;&#160;<span class="keyword">val</span>&#160;fun_apply_stog_data_doc_rules&#160;:<br/>
&#160;&#160;&#160;&#160;(<span class="constructor">Stog_types</span>.stog&#160;*&#160;<span class="keywordsign">'</span>a)&#160;<span class="constructor">Stog_engine</span>.stog_doc_rules&#160;<span class="keywordsign">-&gt;</span><br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">Stog_engine</span>.level_fun<br/>
&#160;&#160;<span class="keyword">val</span>&#160;fun_apply_data_doc_rules&#160;:<br/>
&#160;&#160;&#160;&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">Stog_engine</span>.stog_doc_rules&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">Stog_engine</span>.level_fun<br/>
&#160;&#160;<span class="keyword">val</span>&#160;get_languages&#160;:&#160;<span class="keywordsign">'</span>a&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;<span class="constructor">XR</span>.env&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="keywordsign">'</span>a&#160;*&#160;string&#160;list<br/>
&#160;&#160;<span class="keyword">type</span>&#160;module_fun&#160;=&#160;<span class="constructor">Stog_types</span>.stog&#160;<span class="keywordsign">-&gt;</span>&#160;(<span class="keyword">module</span>&#160;<span class="constructor">Stog_engine</span>.<span class="constructor">Module</span>)<br/>
&#160;&#160;<span class="keyword">val</span>&#160;modules&#160;:&#160;unit&#160;<span class="keywordsign">-&gt;</span>&#160;(string&#160;*&#160;<span class="constructor">Stog_engine</span>.module_fun)&#160;list<br/>
&#160;&#160;<span class="keyword">val</span>&#160;register_module&#160;:&#160;string&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_engine</span>.module_fun&#160;<span class="keywordsign">-&gt;</span>&#160;unit<br/>
&#160;&#160;<span class="keyword">val</span>&#160;module_by_name&#160;:&#160;string&#160;<span class="keywordsign">-&gt;</span>&#160;<span class="constructor">Stog_engine</span>.module_fun&#160;option<br/>
<span class="keyword">end</span></code></div></contents></ocamldoc>