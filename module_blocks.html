<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
<title>Stog : Module Blocks</title>
<link href="https://zoggy.github.io/stog/style.css" rel="stylesheet" type="text/css"/>
</head>
<script type="text/javascript">
function submitSearch(){
    var q = document.getElementById('q');
    q.value =q.value + " site:https://zoggy.github.io/stog ";
    return true;
}
</script>
<body>
<div id="page">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">

<!--&lt;image float="right" src="&lt;site-url/&gt;/stog-logo.svg" width="30"/&gt;-->

  <div class="nav-collapse">
    <ul class="nav">
    <li class="&lt;navbar-home/&gt;"><a href="https://zoggy.github.io/stog/index.html">Stog</a></li>
    <li class="&lt;navbar-install/&gt;"><a href="https://zoggy.github.io/stog/install.html">Installation</a></li>
    <li class="active"><a href="https://zoggy.github.io/stog/doc.html">Documentation</a></li>
    <li class="&lt;navbar-plugins/&gt;"><a href="https://zoggy.github.io/stog/plugins.html">Plugins</a></li>
    <li class="&lt;navbar-blog/&gt;"><a href="https://zoggy.github.io/stog/blog.html">Blog</a></li>
    <li class="&lt;navbar-about/&gt;"><a href="https://zoggy.github.io/stog/about.html">?</a></li>
    </ul>
<!--
    &lt;div class="nav pull-right"&gt;
       &lt;form action="https://qwant.com/" method="GET"
         onsubmit="submitSearch();"
         style="overflow:hidden;margin:0;margin-top:5px;padding:0;height:28px;display:flex;"
         frameborder="0"&gt;
         &lt;input style="width: 100px;" type="text" id="q" placeHolder="Search" name="q"/&gt;
         &lt;input style="font-size: 0.8em" type="submit" value="ðŸ”Ž"/&gt;
       &lt;/form&gt;
    &lt;/div&gt;
-->
  </div>

</div>
</div>
</div>

<div id="header">
  
  
  
  <div class="page-title">Module Blocks</div>
</div>




<p>
Here are the functions of the module, which can be associated to
levels (see <a href="https://zoggy.github.io/stog/funs.html">Predefined modules and functions</a>):
</p>

<ul class="toc"><li class="toc-section"><a href="https://zoggy.github.io/stog/module_blocks.html#init">init</a></li><li class="toc-section"><a href="https://zoggy.github.io/stog/module_blocks.html#base">base</a></li><li class="toc-section"><a href="https://zoggy.github.io/stog/module_blocks.html#sectionning">sectionning</a></li><li class="toc-section"><a href="https://zoggy.github.io/stog/module_blocks.html#gather-ids">gather-ids</a></li><li class="toc-section"><a href="https://zoggy.github.io/stog/module_blocks.html#doc">doc</a></li></ul>

<div class="section"><div aria-level="1" class="section-title" id="init" role="heading">init</div>
<p>This functions initialize section counters. </p>
</div>

<div class="section"><div aria-level="1" class="section-title" id="base" role="heading">base</div>
<p>
This function applies the following rules:
</p>

<ul class="toc"><li class="toc-subsection"><a href="https://zoggy.github.io/stog/module_blocks.html#block">block</a></li><li class="toc-subsection"><a href="https://zoggy.github.io/stog/module_blocks.html#counter">counter</a></li></ul>

<p class="alert alert-warning">This function also applies the
<a href="https://zoggy.github.io/stog/funs.html#base">base rules</a>.</p>


<div class="subsection"><div aria-level="2" class="subsection-title" id="block" role="heading">block</div>
<p>Not documented yet.</p>
</div>

<div class="subsection"><div aria-level="2" class="subsection-title" id="counter" role="heading">counter</div>
<pre class="code-xml"><span class="hl kwa">&lt;counter</span><span class="hl std"> </span><span class="">counter-name</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">/&gt;</span></pre>
<p>is reduced to the current value of the counter associated to the given name.</p>
</div>


</div>

<div class="section"><div aria-level="1" class="section-title" id="sectionning" role="heading">sectionning</div>
<p>
This function uses the sectionning tags to rewrite the corresponding
nodes.
</p>
<p>
Syntax:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;section</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">&gt;</span><span class="hl std">
  ...
  </span><span class="hl kwa">&lt;subsection</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">&gt;</span><span class="hl std">...</span><span class="hl kwa">&lt;/subsection</span><span class="hl kwa">&gt;</span><span class="hl std">
  ...
</span><span class="hl kwa">&lt;/section</span><span class="hl kwa">&gt;</span><span class="hl std">
 </span></pre>

<p>
This is used to insert sections and subsections, with a given title. The id,
if given, will be associated to the section title node.
</p>
<p>
Default sectionning tags are, in this order,
<code>section</code>, <code>subsection</code>, <code>subsubsection</code>,
<code>paragraph</code>.
You can specify other nodes:
</p>
<ul>
<li>for one document, using the "sectionning" attribute in the document, for example:
  <pre class="code-xml"><span class="hl kwa">&lt;page</span><span class="hl std"> </span><span class="">sectionning</span><span class="hl std">=</span><span class="hl str">"section,subsection,paragraph"</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">&gt;</span><span class="hl std">...</span><span class="hl kwa">&lt;/page</span><span class="hl kwa">&gt;</span></pre>
  will define "section", "subsection" and "paragraph" as sectionning nodes.
</li>
<li>for all the site documents, using the "stog:sectionning" attribute in the main document
  (see <a href="https://zoggy.github.io/stog/stog-main-document.html">Stog main document</a>):
  <pre class="code-xml"><span class="hl kwa">&lt;page</span><span class="hl std"> </span><span class="">stog:sectionning</span><span class="hl std">=</span><span class="hl str">"section,subsection,paragraph"</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">&gt;</span><span class="hl std">...</span><span class="hl kwa">&lt;/page</span><span class="hl kwa">&gt;</span></pre>
</li>
</ul>
<p>
When a sectionning node is reduced, a <a href="https://zoggy.github.io/stog/module_blocks.html#block">block</a> node
 is created, so that
refering to the section (or subsection, or ...), will use the title of the section
(or subsection, or ...) for the produced link default text.
</p>
<p>To prevent a sectionning node having a counter associated, you can use
<span class="icode"><span class="hl std">section-counter="false"</span></span> in the document attribute, or
<span class="icode"><span class="hl std">stog:section-counter="false"</span></span> in the main document. "section" can be replaced
by "subsection" or any other node to prevent this node having a counter.
</p>
<p>
The function also applies the <a href="https://zoggy.github.io/stog/module_blocks.html#block">block</a> and <a href="https://zoggy.github.io/stog/module_blocks.html#counter">counter</a> rules.
</p>

<p class="alert alert-warning">This function also applies the
<a href="https://zoggy.github.io/stog/funs.html#base">base rules</a>.</p>

</div>

<div class="section"><div aria-level="1" class="section-title" id="gather-ids" role="heading">gather-ids</div>
<p>
This function collects all ids (the values attached to <span class="icode"><span class="hl std">id="..."</span></span> attributes)
in all documents, so they can be referenced to in upper levels.
</p>
<p>
Having twice the same id in a document results in a warning.
</p>
</div>

<div class="section"><div aria-level="1" class="section-title" id="doc" role="heading">doc</div>
<p>
This function applies the following rules:
<span class="icode"><span class="hl kwa">&lt;doc</span><span class="hl kwa">&gt;</span></span>, <span class="icode"><span class="hl kwa">&lt;post</span><span class="hl kwa">&gt;</span></span>,
<span class="icode"><span class="hl kwa">&lt;page</span><span class="hl kwa">&gt;</span></span> and <span class="icode"><span class="hl kwa">&lt;block</span><span class="hl kwa">&gt;</span></span>.
</p>
<p>
Syntax:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"path[#id]"</span><span class="hl kwa">&gt;</span><span class="hl std">text</span><span class="hl kwa">&lt;/doc</span><span class="hl kwa">&gt;</span></pre>

<p>
This will return a link to the document specified by its path and optional fragment id.
The path of a document is its absolute name from the root directoty of your project.
You are not forced
to give the full path, but can also give only one or more of the last parts
of the path, as long as it uniquely identifies an existing document.
</p>
<p>
For example, suppose you want to refer to the document defined in file
<code>&lt;root dir&gt;/foo/bar/hello.html</code>. The path of this document
is "/foo/bar/hello.html". You can refer to it in various ways:
</p>
<ul>
<li>with its absolute path, providing the heading '/': <code>/foo/bar/hello.html</code>,</li>
<li>with only the last part of its path: <code>hello.html</code>,</li>
<li>with an ending subpart of its path: <code>bar/hello.html</code>.</li>
</ul>
<p>In the last two cases, an error will be raised if more than one documents
match the incomplete path. You can provide an additional attribute <code>type</code>
to prevent ambiguities, for example:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"bar/hello"</span><span class="hl std"> </span><span class="">type</span><span class="hl std">=</span><span class="hl str">"post"</span><span class="hl kwa">/&gt;</span></pre>
<p>
The extension of the path can be omitted if there is no ambiguity with another
document having the same path modulo its extension.
</p>
<p>
Refering to an unknown document will raise an error. If no path is given,
<span class="icode"><span class="hl kwa">&lt;doc-path</span><span class="hl kwa">/&gt;</span></span> is used instead, i.e. the string associated to
<code>doc-path</code> in the environment, to retrieve the current document path.
</p>
<p>
A node id can also be specified, like <code>thisblock</code> in
<span class="icode"><span class="hl std">href="blabla#thisblock"</span></span>. Refering to an unknown block id
will raise an error.
</p>
<p>
If no text is given for the link, the title of the document
will be used instead (or, if a node id is given, the title associated to
the node id, if any). Specifying in attributes <span class="icode"><span class="hl std">quotes="true"</span></span>
indicates to add quotes around the document title.
</p>
<p>
<span class="icode"><span class="hl kwa">&lt;page</span><span class="hl std"> ...</span><span class="hl kwa">&gt;</span></span> and <span class="icode"><span class="hl kwa">&lt;post</span><span class="hl std"> ... </span><span class="hl kwa">&gt;</span></span>
are equivalent respectively to
<span class="icode"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">type</span><span class="hl std">=</span><span class="hl str">"page"</span><span class="hl std"> ...</span><span class="hl kwa">&gt;</span></span> and
<span class="icode"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">type</span><span class="hl std">=</span><span class="hl str">"post"</span><span class="hl std"> ...</span><span class="hl kwa">&gt;</span></span>.
</p>
<p>The <span class="icode"><span class="hl kwa">&lt;block</span><span class="hl kwa">&gt;</span></span> rule in this function is not the
same as <a href="https://zoggy.github.io/stog/module_blocks.html#block">block</a> base rule.
In this function,
</p>
<pre class="code-xml"><span class="hl kwa">&lt;block</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">&gt;</span><span class="hl std">text</span><span class="hl kwa">&lt;/block</span><span class="hl kwa">&gt;</span></pre>
<p>is used to refer to a block using the given <code>href</code> attribute. Here the
href only contains an id, it is not of the form "path[#id]". This will
be reduced to a link to the corresponding document, using the given text.
</p>
<p>If the node matching the <code>href</code> was defined with the
<a href="https://zoggy.github.io/stog/module_blocks.html#block">block</a> base rule (i.e. without <code>href</code> attribute),
then the title associated to this node is used as text for the produced link, if no
text was given (<span class="icode"><span class="hl kwa">&lt;block</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl kwa">/&gt;</span></span>).
</p>
<p>So,</p>
<pre class="code-xml"><span class="hl kwa">&lt;block</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"fig1"</span><span class="hl kwa">/&gt;</span></pre>
<p>is equivalent to</p>
<pre class="code-xml"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"#fig1"</span><span class="hl kwa">/&gt;</span></pre>
<p>or</p>
<pre class="code-xml"><span class="hl kwa">&lt;doc</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"&amp;lt;doc-path/&amp;gt;#fig1"</span><span class="hl kwa">/&gt;</span></pre>
<p>
But the purpose of <code>&lt;block&gt;</code> rule is not to be used directly, but rather
by defining other rules reducing to <code>&lt;block&gt;</code>, like environments in
latex for figures, proofs, propositions, ...
</p>
<p>Here is an example of definition of a function in a document definition:</p>
<pre class="code-xml"><span class="hl kwa">&lt;article</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"..."</span><span class="hl std"> </span><span class="">with-contents</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;theorem</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">""</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">""</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">""</span><span class="hl kwa">&gt;</span><span class="hl kwa">&lt;block</span><span class="hl std">
  </span><span class="">counter-name</span><span class="hl std">=</span><span class="hl str">"theorem"</span><span class="hl std"> </span><span class="">class</span><span class="hl std">=</span><span class="hl str">"theorem"</span><span class="hl std">
  </span><span class="">label</span><span class="hl std">=</span><span class="hl str">"Theorem"</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"&amp;lt;href/&amp;gt;"</span><span class="hl std">
  </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"&amp;lt;id/&amp;gt;"</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"&amp;lt;title/&amp;gt;"</span><span class="hl std">
</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;div</span><span class="hl std"> </span><span class="">class</span><span class="hl std">=</span><span class="hl str">"&amp;lt;class/&amp;gt;"</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"&amp;lt;id/&amp;gt;"</span><span class="hl kwa">&gt;</span><span class="hl std">
  </span><span class="hl kwa">&lt;div</span><span class="hl std"> </span><span class="">class</span><span class="hl std">=</span><span class="hl str">"title"</span><span class="hl kwa">&gt;</span><span class="hl kwa">&lt;title</span><span class="hl kwa">/&gt;</span><span class="hl kwa">&lt;/div</span><span class="hl kwa">&gt;</span><span class="hl std">
  </span><span class="hl kwa">&lt;div</span><span class="hl std"> </span><span class="">class</span><span class="hl std">=</span><span class="hl str">"contents"</span><span class="hl kwa">&gt;</span><span class="hl kwa">&lt;contents</span><span class="hl kwa">/&gt;</span><span class="hl kwa">&lt;/div</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;/div</span><span class="hl kwa">&gt;</span><span class="hl kwa">&lt;/block</span><span class="hl kwa">&gt;</span><span class="hl kwa">&lt;/theorem</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;contents</span><span class="hl kwa">&gt;</span><span class="hl std">...</span><span class="hl kwa">&lt;/contents</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;/article</span><span class="hl kwa">&gt;</span></pre>
<p>This defines a new rule <span class="icode"><span class="hl kwa">&lt;theorem</span><span class="hl kwa">&gt;</span></span> used this way to define a new theorem:</p>
<pre class="code-xml"><span class="hl kwa">&lt;theorem</span><span class="hl std"> </span><span class="">id</span><span class="hl std">=</span><span class="hl str">"thmain"</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"Main result"</span><span class="hl kwa">&gt;</span><span class="hl std">...</span><span class="hl kwa">&lt;/theorem</span><span class="hl kwa">&gt;</span></pre>
<p>Elsewhere, this theorem can be referred to using</p>
<pre class="code-xml"><span class="hl kwa">&lt;theorem</span><span class="hl std"> </span><span class="">href</span><span class="hl std">=</span><span class="hl str">"thmain"</span><span class="hl kwa">/&gt;</span></pre>
<p>which will be reduced to a link with "Theorem 1" as text, if this theorem was the
first defined in the article.
</p>

<p class="alert alert-warning">This function also applies the
<a href="https://zoggy.github.io/stog/funs.html#base">base rules</a>.</p>

</div>









<div id="footer">
<div class="generatedon">Generated on November 30, 2016 at 12h27</div>
</div>
<!--&lt;script type="text/javascript" src="&lt;site-url/&gt;/jquery.js"&gt;_&lt;/script&gt;-->
<!--&lt;script type="text/javascript" src="&lt;site-url/&gt;/bootstrap-collapse.js"&gt;_&lt;/script&gt;-->

</div> <!-- #page -->
</body>
</html>
