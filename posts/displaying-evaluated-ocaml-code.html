<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
<title>Stog : Displaying evaluated OCaml code</title>
<link href="https://zoggy.github.io/stog/style.css" rel="stylesheet" type="text/css"/>
</head>
<script type="text/javascript">
function submitSearch(){
    var q = document.getElementById('q');
    q.value =q.value + " site:https://zoggy.github.io/stog ";
    return true;
}
</script>
<body>
<div id="page">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">

<!--&lt;image float="right" src="&lt;site-url/&gt;/stog-logo.svg" width="30"/&gt;-->

  <div class="nav-collapse">
    <ul class="nav">
    <li class="&lt;navbar-home/&gt;"><a href="https://zoggy.github.io/stog/index.html">Stog</a></li>
    <li class="&lt;navbar-install/&gt;"><a href="https://zoggy.github.io/stog/install.html">Installation</a></li>
    <li class="&lt;navbar-doc/&gt;"><a href="https://zoggy.github.io/stog/doc.html">Documentation</a></li>
    <li class="&lt;navbar-plugins/&gt;"><a href="https://zoggy.github.io/stog/plugins.html">Plugins</a></li>
    <li class="active"><a href="https://zoggy.github.io/stog/blog.html">Blog</a></li>
    <li class="&lt;navbar-about/&gt;"><a href="https://zoggy.github.io/stog/about.html">?</a></li>
    </ul>
    <div class="nav pull-right">
       <form action="https://qwant.com/" frameborder="0" method="GET" onsubmit="submitSearch();" style="overflow:hidden;margin:0;margin-top:5px;padding:0;height:28px;display:flex;">
         <input id="q" name="q" placeHolder="Search" style="width: 100px;" type="text"/>
         <input style="font-size: 0.8em" type="submit" value="ðŸ”Ž"/>
       </form>
    </div>
  </div>

</div>
</div>
</div>

<div id="header">
  
  
  <div class="doc-navbar">
      <div class="navleft"><a href="https://zoggy.github.io/stog/posts/latex-in-stog.html">LaTeX in stog</a></div>
      <div class="navright"><a href="https://zoggy.github.io/stog/posts/including-code-file.html">Including a code file (deferring evaluation)</a></div>
    </div>
  <div class="page-title">Displaying evaluated OCaml code</div>
</div>

<div class="date">March 11, 2012</div>


<p>
Bytecode version of Stog, <span class="icode"><span class="hl std">stog.byte</span></span>,
offers the <span class="icode"><span class="hl kwa">&lt;ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std"> ... </span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span></span>
function to evaluate code and display the result. This is nice to provide
verified code examples on your pages.
</p>

<p>
Example:
<pre class="code-xml"><span class="hl kwa">&lt;ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;
</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span></pre>
will display this: <pre class="code-ocaml"><span><span class="hl kwa">let</span> mylist <span class="hl opt">= [</span> <span class="hl num">1</span> <span class="hl opt">;</span> <span class="hl num">2</span> <span class="hl opt">;</span> <span class="hl num">3</span> <span class="hl opt">;</span> <span class="hl num">4</span><span class="hl opt">];;</span></span></pre>
</p>
<p>Adding the <span class="icode"><span class="hl std">toplevel="true"</span></span> attribute will enable printing of the
toplevel result, so
<pre class="code-xml"><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
</span></pre>
will display this: <pre class="code-ocaml"><span># <span class="hl kwa">let</span> mylist <span class="hl opt">= [</span> <span class="hl num">1</span> <span class="hl opt">;</span> <span class="hl num">2</span> <span class="hl opt">;</span> <span class="hl num">3</span> <span class="hl opt">;</span> <span class="hl num">4</span><span class="hl opt">];;</span></span>
<span class="ocaml-toplevel"><span class="toplevel-out">val mylist : int list = [1; 2; 3; 4]</span></span></pre>
</p>
<p>
By default, <span class="icode"><span class="hl std">ocaml-eval</span></span> will stop Stog if an exception is
raised when evaluating code.
The <span class="icode"><span class="hl std">error-exc</span></span> attribute can be used to change this behaviour.
By default it is <span class="icode"><span class="hl std">"true"</span></span>, but
giving this attribute another value will result in printing the raised exception instead
of stopping Stog. This is useful when you want to show code raising exceptions, but still
don't want to let other piece of code fail silently.
<pre class="code-xml"><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl std"> </span><span class="">error-exc</span><span class="hl std">=</span><span class="hl str">"false"</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;
let mylist2 = [ 1 ; 2 ; 3 ; "hello"];;
</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span></pre>
will display this: <pre class="code-ocaml"><span># <span class="hl kwa">let</span> mylist <span class="hl opt">= [</span> <span class="hl num">1</span> <span class="hl opt">;</span> <span class="hl num">2</span> <span class="hl opt">;</span> <span class="hl num">3</span> <span class="hl opt">;</span> <span class="hl num">4</span><span class="hl opt">];;</span></span>
<span class="ocaml-toplevel"><span class="toplevel-out">val mylist : int list = [1; 2; 3; 4]</span></span>
<span># <span class="hl kwa">let</span> mylist2 <span class="hl opt">= [</span> <span class="hl num">1</span> <span class="hl opt">;</span> <span class="hl num">2</span> <span class="hl opt">;</span> <span class="hl num">3</span> <span class="hl opt">;</span> <span class="error-loc" title="Error: This expression has type string but an expression was expected of type
         int"></span><span class="hl str"><span class="error-loc" title="Error: This expression has type string but an expression was expected of type
         int">"hello"</span></span><span class="hl opt"><span class="error-loc" title="Error: This expression has type string but an expression was expected of type
         int"></span>];;</span></span>
<span class="ocaml-toplevel ocaml-exc"><span class="stderr">Error: This expression has type string but an expression was expected of type
         int</span></span></pre>
Without <span class="icode"><span class="hl std">error-exc="false"</span></span>, Stog would have failed with the
OCaml error message.
</p>






<p class="doccode alert alert-info">
For information you can see the <a href="#pagesource"> source code of the page</a>.
</p>
<div id="pagesource">
  <pre class="code-xml"><span class="hl kwa">&lt;post</span><span class="hl std"> </span><span class="">title</span><span class="hl std">=</span><span class="hl str">"Displaying evaluated OCaml code"</span><span class="hl std">
</span><span class="">date</span><span class="hl std">=</span><span class="hl str">"2012/03/11"</span><span class="hl std">
</span><span class="">topics</span><span class="hl std">=</span><span class="hl str">"stog"</span><span class="hl std">
</span><span class="">keywords</span><span class="hl std">=</span><span class="hl str">"ocaml, evaluation, code"</span><span class="hl std">
</span><span class="">published</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl std">
</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;p</span><span class="hl kwa">&gt;</span><span class="hl std">
Bytecode version of Stog, </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">stog.byte</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std">,
offers the </span><span class="hl kwa">&lt;icode</span><span class="hl std"> </span><span class="">lang</span><span class="hl std">=</span><span class="hl str">"xml"</span><span class="hl kwa">&gt;</span><span class="hl std">&lt;![CDATA[</span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std"> ... </span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">]]&gt;</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std">
function to evaluate code and display the result. This is nice to provide
verified code examples on your pages.
</span><span class="hl kwa">&lt;/p</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;sep_</span><span class="hl kwa">/&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;p</span><span class="hl kwa">&gt;</span><span class="hl std">
Example:
</span><span class="hl kwa">&lt;hcode</span><span class="hl std"> </span><span class="">lang</span><span class="hl std">=</span><span class="hl str">"xml"</span><span class="hl kwa">&gt;</span><span class="hl std">&lt;![CDATA[</span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;
</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">]]&gt;</span><span class="hl kwa">&lt;/hcode</span><span class="hl kwa">&gt;</span><span class="hl std">
will display this: </span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">let mylist = [ 1 ; 2 ; 3 ; 4];;</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;/p</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;p</span><span class="hl kwa">&gt;</span><span class="hl std">Adding the </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">toplevel="true"</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std"> attribute will enable printing of the
toplevel result, so
</span><span class="hl kwa">&lt;hcode</span><span class="hl std"> </span><span class="">lang</span><span class="hl std">=</span><span class="hl str">"xml"</span><span class="hl kwa">&gt;</span><span class="hl std">&lt;![CDATA[</span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
]]&gt;</span><span class="hl kwa">&lt;/hcode</span><span class="hl kwa">&gt;</span><span class="hl std">
will display this: </span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl kwa">&gt;</span><span class="hl std">let mylist = [ 1 ; 2 ; 3 ; 4];;</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;/p</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;p</span><span class="hl kwa">&gt;</span><span class="hl std">
By default, </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">ocaml-eval</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std"> will stop Stog if an exception is
raised when evaluating code.
The </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">error-exc</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std"> attribute can be used to change this behaviour.
By default it is </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">"true"</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std">, but
giving this attribute another value will result in printing the raised exception instead
of stopping Stog. This is useful when you want to show code raising exceptions, but still
don't want to let other piece of code fail silently.
</span><span class="hl kwa">&lt;hcode</span><span class="hl std"> </span><span class="">lang</span><span class="hl std">=</span><span class="hl str">"xml"</span><span class="hl kwa">&gt;</span><span class="hl std">&lt;![CDATA[</span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl std"> </span><span class="">error-exc</span><span class="hl std">=</span><span class="hl str">"false"</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;
let mylist2 = [ 1 ; 2 ; 3 ; "hello"];;
</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">]]&gt;</span><span class="hl kwa">&lt;/hcode</span><span class="hl kwa">&gt;</span><span class="hl std">
will display this: </span><span class="hl kwa">&lt;ocaml-eval</span><span class="hl std"> </span><span class="">toplevel</span><span class="hl std">=</span><span class="hl str">"true"</span><span class="hl std"> </span><span class="">error-exc</span><span class="hl std">=</span><span class="hl str">"false"</span><span class="hl kwa">&gt;</span><span class="hl std">
let mylist = [ 1 ; 2 ; 3 ; 4];;
let mylist2 = [ 1 ; 2 ; 3 ; "hello"];;</span><span class="hl kwa">&lt;/ocaml-eval</span><span class="hl kwa">&gt;</span><span class="hl std">
Without </span><span class="hl kwa">&lt;icode</span><span class="hl kwa">&gt;</span><span class="hl std">error-exc="false"</span><span class="hl kwa">&lt;/icode</span><span class="hl kwa">&gt;</span><span class="hl std">, Stog would have failed with the
OCaml error message.
</span><span class="hl kwa">&lt;/p</span><span class="hl kwa">&gt;</span><span class="hl std">
</span><span class="hl kwa">&lt;/post</span><span class="hl kwa">&gt;</span></pre>
</div>

<div id="footer">
<div class="generatedon">Generated on November 30, 2016 at 12h21</div>
</div>
<!--&lt;script type="text/javascript" src="&lt;site-url/&gt;/jquery.js"&gt;_&lt;/script&gt;-->
<!--&lt;script type="text/javascript" src="&lt;site-url/&gt;/bootstrap-collapse.js"&gt;_&lt;/script&gt;-->

</div> <!-- #page -->
</body>
</html>
